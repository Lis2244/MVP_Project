{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const[profile,setProfile]=useState(null);const[message,setMessage]=useState('');const fetchProfile=async()=>{try{const token=localStorage.getItem('token');const response=await api.get('/users/me',{headers:{Authorization:`Bearer ${token}`}});setProfile(response.data);}catch(error){console.error(error);setMessage('Ошибка при получении профиля');}};useEffect(()=>{fetchProfile();},[]);if(!profile)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:message||'Загрузка профиля...'});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-4\",children:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profile.user.email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0420\\u0435\\u0433\\u0438\\u043E\\u043D/\\u0433\\u043E\\u0440\\u043E\\u0434:\"}),\" \",profile.user.location]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold mb-4\",children:\"\\u0412\\u0430\\u0448\\u0438 \\u043E\\u0431\\u044A\\u044F\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:profile.announcements.map(ann=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border rounded p-4 shadow\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold mb-2\",children:ann.title}),/*#__PURE__*/_jsx(\"img\",{src:JSON.parse(ann.image_url)[0],alt:ann.title,className:\"w-full h-32 object-cover rounded mb-2\"}),/*#__PURE__*/_jsx(\"a\",{href:`/announcements/${ann.id}`,className:\"text-blue-500 hover:underline\",children:\"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"})]},ann.id))})]});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","Profile","profile","setProfile","message","setMessage","fetchProfile","token","localStorage","getItem","response","get","headers","Authorization","data","error","console","className","children","user","email","location","announcements","map","ann","title","src","JSON","parse","image_url","alt","href","id"],"sources":["C:/Users/Acer/Desktop/Шаблоны/MVP_Project/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../services/api';\r\n\r\nfunction Profile() {\r\n  const [profile, setProfile] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await api.get('/users/me', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setProfile(response.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMessage('Ошибка при получении профиля');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  if (!profile) return <div className=\"p-4\">{message || 'Загрузка профиля...'}</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6\">\r\n      <h2 className=\"text-3xl font-bold mb-4\">Профиль</h2>\r\n      <p className=\"mb-4\"><strong>Email:</strong> {profile.user.email}</p>\r\n      <p className=\"mb-4\"><strong>Регион/город:</strong> {profile.user.location}</p>\r\n      <h3 className=\"text-2xl font-semibold mb-4\">Ваши объявления</h3>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        {profile.announcements.map(ann => (\r\n          <div key={ann.id} className=\"bg-white border rounded p-4 shadow\">\r\n            <h4 className=\"text-xl font-bold mb-2\">{ann.title}</h4>\r\n            <img src={JSON.parse(ann.image_url)[0]} alt={ann.title} className=\"w-full h-32 object-cover rounded mb-2\" />\r\n            <a href={`/announcements/${ann.id}`} className=\"text-blue-500 hover:underline\">Подробнее</a>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAE1C,KAAM,CAAAY,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,GAAG,CAACe,GAAG,CAAC,WAAW,CAAE,CAC1CC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUN,KAAK,EAAG,CAC9C,CAAC,CAAC,CACFJ,UAAU,CAACO,QAAQ,CAACI,IAAI,CAAC,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpBV,UAAU,CAAC,8BAA8B,CAAC,CAC5C,CACF,CAAC,CAEDV,SAAS,CAAC,IAAM,CACdW,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAI,CAACJ,OAAO,CAAE,mBAAOJ,IAAA,QAAKmB,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAEd,OAAO,EAAI,qBAAqB,CAAM,CAAC,CAElF,mBACEJ,KAAA,QAAKiB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCpB,IAAA,OAAImB,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,4CAAO,CAAI,CAAC,cACpDlB,KAAA,MAAGiB,SAAS,CAAC,MAAM,CAAAC,QAAA,eAACpB,IAAA,WAAAoB,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAAChB,OAAO,CAACiB,IAAI,CAACC,KAAK,EAAI,CAAC,cACpEpB,KAAA,MAAGiB,SAAS,CAAC,MAAM,CAAAC,QAAA,eAACpB,IAAA,WAAAoB,QAAA,CAAQ,sEAAa,CAAQ,CAAC,IAAC,CAAChB,OAAO,CAACiB,IAAI,CAACE,QAAQ,EAAI,CAAC,cAC9EvB,IAAA,OAAImB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,uFAAe,CAAI,CAAC,cAChEpB,IAAA,QAAKmB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACnDhB,OAAO,CAACoB,aAAa,CAACC,GAAG,CAACC,GAAG,eAC5BxB,KAAA,QAAkBiB,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eAC9DpB,IAAA,OAAImB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAEM,GAAG,CAACC,KAAK,CAAK,CAAC,cACvD3B,IAAA,QAAK4B,GAAG,CAAEC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAACK,SAAS,CAAC,CAAC,CAAC,CAAE,CAACC,GAAG,CAAEN,GAAG,CAACC,KAAM,CAACR,SAAS,CAAC,uCAAuC,CAAE,CAAC,cAC5GnB,IAAA,MAAGiC,IAAI,CAAE,kBAAkBP,GAAG,CAACQ,EAAE,EAAG,CAACf,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAC,wDAAS,CAAG,CAAC,GAHpFM,GAAG,CAACQ,EAIT,CACN,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAA/B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}