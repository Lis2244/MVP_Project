{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AnnouncementDetails(){const{id}=useParams();const navigate=useNavigate();const[announcement,setAnnouncement]=useState(null);const[editing,setEditing]=useState(false);const[formData,setFormData]=useState({title:'',description:'',categories:'',target_info:''});const[message,setMessage]=useState('');useEffect(()=>{const fetchAnnouncement=async()=>{try{const response=await api.get(`/announcements/${id}`);setAnnouncement(response.data);setFormData({title:response.data.title,description:response.data.description,categories:response.data.categories,target_info:response.data.target_info});}catch(error){console.error('Ошибка загрузки объявления:',error);}};fetchAnnouncement();},[id]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleUpdate=async()=>{try{const token=localStorage.getItem('token');const response=await api.put(`/announcements/${id}`,formData,{headers:{Authorization:`Bearer ${token}`}});setAnnouncement(response.data);setEditing(false);setMessage('Объявление обновлено');}catch(error){console.error('Ошибка обновления объявления:',error);setMessage('Ошибка обновления объявления');}};const handleDelete=async()=>{try{const token=localStorage.getItem('token');await api.delete(`/announcements/${id}`,{headers:{Authorization:`Bearer ${token}`}});navigate('/profile');}catch(error){console.error('Ошибка удаления объявления:',error);setMessage('Ошибка удаления объявления');}};if(!announcement)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto p-6\",children:[editing?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-4\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043E\\u0431\\u044A\\u044F\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:handleChange,className:\"w-full border rounded px-4 py-2 mb-4\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,className:\"w-full border rounded px-4 py-2 mb-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"categories\",value:formData.categories,onChange:handleChange,placeholder:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438 (\\u043D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u0438\\u0433\\u0440\\u0443\\u0448\\u043A\\u0438, \\u043A\\u043D\\u0438\\u0433\\u0438)\",className:\"w-full border rounded px-4 py-2 mb-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"target_info\",value:formData.target_info,onChange:handleChange,placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u043E\\u0442 1 \\u0434\\u043E 3 \\u043B\\u0435\\u0442 \\u0438\\u043B\\u0438 \\u0440\\u0430\\u0437\\u043C\\u0435\\u0440 \\u043E\\u0434\\u0435\\u0436\\u0434\\u044B/\\u043E\\u0431\\u0443\\u0432\\u0438\",className:\"w-full border rounded px-4 py-2 mb-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,className:\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(false),className:\"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-4\",children:announcement.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),\" \",announcement.description]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438:\"}),\" \",announcement.categories]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0426\\u0435\\u043B\\u0435\\u0432\\u0430\\u044F \\u0430\\u0443\\u0434\\u0438\\u0442\\u043E\\u0440\\u0438\\u044F:\"}),\" \",announcement.target_info]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 gap-4 my-4\",children:JSON.parse(announcement.image_url).map((img,idx)=>/*#__PURE__*/_jsx(\"img\",{src:img,alt:`Объявление ${idx}`,className:\"w-full h-40 object-cover rounded\"},idx))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(true),className:\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-red-500\",children:message})]});}export default AnnouncementDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","api","jsx","_jsx","jsxs","_jsxs","AnnouncementDetails","id","navigate","announcement","setAnnouncement","editing","setEditing","formData","setFormData","title","description","categories","target_info","message","setMessage","fetchAnnouncement","response","get","data","error","console","handleChange","e","target","name","value","handleUpdate","token","localStorage","getItem","put","headers","Authorization","handleDelete","delete","className","children","type","onChange","placeholder","onClick","JSON","parse","image_url","map","img","idx","src","alt"],"sources":["C:/Users/Acer/Desktop/Шаблоны/MVP_Project/frontend/src/components/AnnouncementDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport api from '../services/api';\r\n\r\nfunction AnnouncementDetails() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [announcement, setAnnouncement] = useState(null);\r\n  const [editing, setEditing] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    categories: '',\r\n    target_info: ''\r\n  });\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchAnnouncement = async () => {\r\n      try {\r\n        const response = await api.get(`/announcements/${id}`);\r\n        setAnnouncement(response.data);\r\n        setFormData({\r\n          title: response.data.title,\r\n          description: response.data.description,\r\n          categories: response.data.categories,\r\n          target_info: response.data.target_info\r\n        });\r\n      } catch (error) {\r\n        console.error('Ошибка загрузки объявления:', error);\r\n      }\r\n    };\r\n    fetchAnnouncement();\r\n  }, [id]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleUpdate = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await api.put(`/announcements/${id}`, formData, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setAnnouncement(response.data);\r\n      setEditing(false);\r\n      setMessage('Объявление обновлено');\r\n    } catch (error) {\r\n      console.error('Ошибка обновления объявления:', error);\r\n      setMessage('Ошибка обновления объявления');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await api.delete(`/announcements/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      navigate('/profile');\r\n    } catch (error) {\r\n      console.error('Ошибка удаления объявления:', error);\r\n      setMessage('Ошибка удаления объявления');\r\n    }\r\n  };\r\n\r\n  if (!announcement) return <div className=\"p-4\">Загрузка...</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6\">\r\n      {editing ? (\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold mb-4\">Редактировать объявление</h2>\r\n          <input \r\n            type=\"text\" \r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            className=\"w-full border rounded px-4 py-2 mb-4\"\r\n          />\r\n          <textarea \r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={handleChange}\r\n            className=\"w-full border rounded px-4 py-2 mb-4\"\r\n          />\r\n          <input \r\n            type=\"text\" \r\n            name=\"categories\"\r\n            value={formData.categories}\r\n            onChange={handleChange}\r\n            placeholder=\"Укажите категории (например, игрушки, книги)\"\r\n            className=\"w-full border rounded px-4 py-2 mb-4\"\r\n          />\r\n          <input \r\n            type=\"text\" \r\n            name=\"target_info\"\r\n            value={formData.target_info}\r\n            onChange={handleChange}\r\n            placeholder=\"Например, от 1 до 3 лет или размер одежды/обуви\"\r\n            className=\"w-full border rounded px-4 py-2 mb-4\"\r\n          />\r\n          <button \r\n            onClick={handleUpdate}\r\n            className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2\"\r\n          >\r\n            Сохранить изменения\r\n          </button>\r\n          <button \r\n            onClick={() => setEditing(false)}\r\n            className=\"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded\"\r\n          >\r\n            Отмена\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold mb-4\">{announcement.title}</h2>\r\n          <p className=\"mb-2\"><strong>Описание:</strong> {announcement.description}</p>\r\n          <p className=\"mb-2\"><strong>Категории:</strong> {announcement.categories}</p>\r\n          <p className=\"mb-2\"><strong>Целевая аудитория:</strong> {announcement.target_info}</p>\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4 my-4\">\r\n            {JSON.parse(announcement.image_url).map((img, idx) => (\r\n              <img key={idx} src={img} alt={`Объявление ${idx}`} className=\"w-full h-40 object-cover rounded\" />\r\n            ))}\r\n          </div>\r\n          <button \r\n            onClick={() => setEditing(true)}\r\n            className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2\"\r\n          >\r\n            Редактировать\r\n          </button>\r\n          <button \r\n            onClick={handleDelete}\r\n            className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded\"\r\n          >\r\n            Удалить\r\n          </button>\r\n        </div>\r\n      )}\r\n      {message && <p className=\"mt-4 text-center text-red-500\">{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AnnouncementDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}